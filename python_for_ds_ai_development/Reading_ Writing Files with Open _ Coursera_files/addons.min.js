/*! Editor.md v1.6.8 | Open source online markdown editor. | MIT License | By: Pandao | https://github.com/pandao/editor.md | 2022-02-14 */
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineOption("showTrailingSpace",!1,function(t,n,o){o==e.Init&&(o=!1),o&&!n?t.removeOverlay("trailingspace"):!o&&n&&t.addOverlay({token:function(e){for(var t=e.string.length,n=t;n&&/\s/.test(e.string.charAt(n-1));--n);return n>e.pos?(e.pos=n,null):(e.pos=t,"trailingspace")},name:"trailingspace"})})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(t,n,o){var r,i=t.getWrapperElement();return r=i.appendChild(document.createElement("div")),r.className=o?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?r.innerHTML=n:r.appendChild(n),e.addClass(i,"dialog-opened"),r}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(o,r,i){function a(t){if("string"==typeof t)u.value=t;else{if(c)return;c=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),f.focus(),i.onClose&&i.onClose(s)}}i||(i={}),n(this,null);var l,s=t(this,o,i.bottom),c=!1,f=this,u=s.getElementsByTagName("input")[0];return u?(u.focus(),i.value&&(u.value=i.value,!1!==i.selectValueOnOpen&&u.select()),i.onInput&&e.on(u,"input",function(e){i.onInput(e,u.value,a)}),i.onKeyUp&&e.on(u,"keyup",function(e){i.onKeyUp(e,u.value,a)}),e.on(u,"keydown",function(t){i&&i.onKeyDown&&i.onKeyDown(t,u.value,a)||((27==t.keyCode||!1!==i.closeOnEnter&&13==t.keyCode)&&(u.blur(),e.e_stop(t),a()),13==t.keyCode&&r(u.value,t))}),!1!==i.closeOnBlur&&e.on(s,"focusout",function(e){null!==e.relatedTarget&&a()})):(l=s.getElementsByTagName("button")[0])&&(e.on(l,"click",function(){a(),f.focus()}),!1!==i.closeOnBlur&&e.on(l,"blur",a),l.focus()),a}),e.defineExtension("openConfirm",function(o,r,i){function a(){c||(c=!0,e.rmClass(l.parentNode,"dialog-opened"),l.parentNode.removeChild(l),f.focus())}n(this,null);var l=t(this,o,i&&i.bottom),s=l.getElementsByTagName("button"),c=!1,f=this,u=1;s[0].focus();for(var d=0;d<s.length;++d){var h=s[d];!function(t){e.on(h,"click",function(n){e.e_preventDefault(n),a(),t&&t(f)})}(r[d]),e.on(h,"blur",function(){--u,setTimeout(function(){u<=0&&a()},200)}),e.on(h,"focus",function(){++u})}}),e.defineExtension("openNotification",function(o,r){function i(){s||(s=!0,clearTimeout(a),e.rmClass(l.parentNode,"dialog-opened"),l.parentNode.removeChild(l))}n(this,i);var a,l=t(this,o,r&&r.bottom),s=!1,c=r&&void 0!==r.duration?r.duration:5e3;return e.on(l,"click",function(t){e.e_preventDefault(t),i()}),c&&(a=setTimeout(i,c)),i})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}function n(e,n){for(var o=t(e),r=o,i=0;i<n.length;i++)-1==r.indexOf(n.charAt(i))&&(r+=n.charAt(i));return o==r?e:new RegExp(e.source,r)}function o(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function r(e,t,o){t=n(t,"g");for(var r=o.line,i=o.ch,a=e.lastLine();r<=a;r++,i=0){t.lastIndex=i;var l=e.getLine(r),s=t.exec(l);if(s)return{from:g(r,s.index),to:g(r,s.index+s[0].length),match:s}}}function i(e,t,i){if(!o(t))return r(e,t,i);t=n(t,"gm");for(var a,l=1,s=i.line,c=e.lastLine();s<=c;){for(var f=0;f<l&&!(s>c);f++){var u=e.getLine(s++);a=null==a?u:a+"\n"+u}l*=2,t.lastIndex=i.ch;var d=t.exec(a);if(d){var h=a.slice(0,d.index).split("\n"),p=d[0].split("\n"),m=i.line+h.length-1,v=h[h.length-1].length;return{from:g(m,v),to:g(m+p.length-1,1==p.length?v+p[0].length:p[p.length-1].length),match:d}}}}function a(e,t,n){for(var o,r=0;r<=e.length;){t.lastIndex=r;var i=t.exec(e);if(!i)break;var a=i.index+i[0].length;if(a>e.length-n)break;(!o||a>o.index+o[0].length)&&(o=i),r=i.index+1}return o}function l(e,t,o){t=n(t,"g");for(var r=o.line,i=o.ch,l=e.firstLine();r>=l;r--,i=-1){var s=e.getLine(r),c=a(s,t,i<0?0:s.length-i);if(c)return{from:g(r,c.index),to:g(r,c.index+c[0].length),match:c}}}function s(e,t,r){if(!o(t))return l(e,t,r);t=n(t,"gm");for(var i,s=1,c=e.getLine(r.line).length-r.ch,f=r.line,u=e.firstLine();f>=u;){for(var d=0;d<s&&f>=u;d++){var h=e.getLine(f--);i=null==i?h:h+"\n"+i}s*=2;var p=a(i,t,c);if(p){var m=i.slice(0,p.index).split("\n"),v=p[0].split("\n"),y=f+m.length,b=m[m.length-1].length;return{from:g(y,b),to:g(y+v.length-1,1==v.length?b+v[0].length:v[v.length-1].length),match:p}}}}function c(e,t,n,o){if(e.length==t.length)return n;for(var r=0,i=n+Math.max(0,e.length-t.length);;){if(r==i)return r;var a=r+i>>1,l=o(e.slice(0,a)).length;if(l==n)return a;l>n?i=a:r=a+1}}function f(e,t,n,o){if(!t.length)return null;var r=o?h:p,i=r(t).split(/\r|\n\r?/);e:for(var a=n.line,l=n.ch,s=e.lastLine()+1-i.length;a<=s;a++,l=0){var f=e.getLine(a).slice(l),u=r(f);if(1==i.length){var d=u.indexOf(i[0]);if(-1==d)continue e;var n=c(f,u,d,r)+l;return{from:g(a,c(f,u,d,r)+l),to:g(a,c(f,u,d+i[0].length,r)+l)}}var m=u.length-i[0].length;if(u.slice(m)==i[0]){for(var v=1;v<i.length-1;v++)if(r(e.getLine(a+v))!=i[v])continue e;var y=e.getLine(a+i.length-1),b=r(y),C=i[i.length-1];if(b.slice(0,C.length)==C)return{from:g(a,c(f,u,m,r)+l),to:g(a+i.length-1,c(y,b,C.length,r))}}}}function u(e,t,n,o){if(!t.length)return null;var r=o?h:p,i=r(t).split(/\r|\n\r?/);e:for(var a=n.line,l=n.ch,s=e.firstLine()-1+i.length;a>=s;a--,l=-1){var f=e.getLine(a);l>-1&&(f=f.slice(0,l));var u=r(f);if(1==i.length){var d=u.lastIndexOf(i[0]);if(-1==d)continue e;return{from:g(a,c(f,u,d,r)),to:g(a,c(f,u,d+i[0].length,r))}}var m=i[i.length-1];if(u.slice(0,m.length)==m){for(var v=1,n=a-i.length+1;v<i.length-1;v++)if(r(e.getLine(n+v))!=i[v])continue e;var y=e.getLine(a+1-i.length),b=r(y);if(b.slice(b.length-i[0].length)==i[0])return{from:g(a+1-i.length,c(y,b,y.length-i[0].length,r)),to:g(a,c(f,u,m.length,r))}}}}function d(e,t,o,a){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=e,o=o?e.clipPos(o):g(0,0),this.pos={from:o,to:o};var c;"object"==typeof a?c=a.caseFold:(c=a,a=null),"string"==typeof t?(null==c&&(c=!1),this.matches=function(n,o){return(n?u:f)(e,t,o,c)}):(t=n(t,"gm"),a&&!1===a.multiline?this.matches=function(n,o){return(n?l:r)(e,t,o)}:this.matches=function(n,o){return(n?s:i)(e,t,o)})}var h,p,g=e.Pos;String.prototype.normalize?(h=function(e){return e.normalize("NFD").toLowerCase()},p=function(e){return e.normalize("NFD")}):(h=function(e){return e.toLowerCase()},p=function(e){return e}),d.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){var n=this.doc.clipPos(t?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(n=g(n.line,n.ch),t?--n.ch<0&&(n.line--,n.ch=(this.doc.getLine(n.line)||"").length):++n.ch>(this.doc.getLine(n.line)||"").length&&(n.ch=0,n.line++),0!=e.cmpPos(n,this.doc.clipPos(n))))return this.atOccurrence=!1;var o=this.matches(t,n);if(this.afterEmptyMatch=o&&0==e.cmpPos(o.from,o.to),o)return this.pos=o,this.atOccurrence=!0,this.pos.match||!0;var r=g(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:r,to:r},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var o=e.splitLines(t);this.doc.replaceRange(o,this.pos.from,this.pos.to,n),this.pos.to=g(this.pos.from.line+o.length-1,o[o.length-1].length+(1==o.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,n){return new d(this.doc,e,t,n)}),e.defineDocExtension("getSearchCursor",function(e,t,n){return new d(this,e,t,n)}),e.defineExtension("selectMatches",function(t,n){for(var o=[],r=this.getSearchCursor(t,this.getCursor("from"),n);r.findNext()&&!(e.cmpPos(r.to(),this.getCursor("to"))>0);)o.push({anchor:r.from(),head:r.to()});o.length&&this.setSelections(o,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function o(e){return e.state.search||(e.state.search=new n)}function r(e){return"string"==typeof e&&e==e.toLowerCase()}function i(e,t,n){return e.getSearchCursor(t,n,{caseFold:r(t),multiline:!0})}function a(e,t,n,o,r){e.openDialog(t,o,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){p(e)},onKeyDown:r,bottom:e.options.search.bottom})}function l(e,t,n,o,r){e.openDialog?e.openDialog(t,r,{value:o,selectValueOnOpen:!0,bottom:e.options.search.bottom}):r(prompt(n,o))}function s(e,t,n,o){e.openConfirm?e.openConfirm(t,o):confirm(n)&&o[0]()}function c(e){return e.replace(/\\([nrt\\])/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e})}function f(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=c(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function u(e,n,o){n.queryText=o,n.query=f(o),e.removeOverlay(n.overlay,r(n.query)),n.overlay=t(n.query,r(n.query)),e.addOverlay(n.overlay),e.showMatchesOnScrollbar&&(n.annotate&&(n.annotate.clear(),n.annotate=null),n.annotate=e.showMatchesOnScrollbar(n.query,r(n.query)))}function d(t,n,r,i){var s=o(t);if(s.query)return h(t,n);var c=t.getSelection()||s.lastQuery;if(c instanceof RegExp&&"x^"==c.source&&(c=null),r&&t.openDialog){var f=null,d=function(n,o){e.e_stop(o),n&&(n!=s.queryText&&(u(t,s,n),s.posFrom=s.posTo=t.getCursor()),f&&(f.style.opacity=1),h(t,o.shiftKey,function(e,n){var o;n.line<3&&document.querySelector&&(o=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&o.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((f=o).style.opacity=.4)}))};a(t,m(t),c,d,function(n,r){var i=e.keyName(n),a=t.getOption("extraKeys"),l=a&&a[i]||e.keyMap[t.getOption("keyMap")][i];"findNext"==l||"findPrev"==l||"findPersistentNext"==l||"findPersistentPrev"==l?(e.e_stop(n),u(t,o(t),r),t.execCommand(l)):"find"!=l&&"findPersistent"!=l||(e.e_stop(n),d(r,n))}),i&&c&&(u(t,s,c),h(t,n))}else l(t,m(t),"Search for:",c,function(e){e&&!s.query&&t.operation(function(){u(t,s,e),s.posFrom=s.posTo=t.getCursor(),h(t,n)})})}function h(t,n,r){t.operation(function(){var a=o(t),l=i(t,a.query,n?a.posFrom:a.posTo);(l.find(n)||(l=i(t,a.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),l.find(n)))&&(t.setSelection(l.from(),l.to()),t.scrollIntoView({from:l.from(),to:l.to()},20),a.posFrom=l.from(),a.posTo=l.to(),r&&r(l.from(),l.to()))})}function p(e){e.operation(function(){var t=o(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function g(e,t){var n=e?document.createElement(e):document.createDocumentFragment();for(var o in t)n[o]=t[o];for(var r=2;r<arguments.length;r++){var i=arguments[r];n.appendChild("string"==typeof i?document.createTextNode(i):i)}return n}function m(e){return g("",null,g("span",{className:"CodeMirror-search-label"},e.phrase("Search:"))," ",g("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",g("span",{style:"color: #888",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}function v(e){return g("",null," ",g("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"})," ",g("span",{style:"color: #888",className:"CodeMirror-search-hint"},e.phrase("(Use /re/ syntax for regexp search)")))}function y(e){return g("",null,g("span",{className:"CodeMirror-search-label"},e.phrase("With:"))," ",g("input",{type:"text",style:"width: 10em",className:"CodeMirror-search-field"}))}function b(e){return g("",null,g("span",{className:"CodeMirror-search-label"},e.phrase("Replace?"))," ",g("button",{},e.phrase("Yes"))," ",g("button",{},e.phrase("No"))," ",g("button",{},e.phrase("All"))," ",g("button",{},e.phrase("Stop")))}function C(e,t,n){e.operation(function(){for(var o=i(e,t);o.findNext();)if("string"!=typeof t){var r=e.getRange(o.from(),o.to()).match(t);o.replace(n.replace(/\$(\d)/g,function(e,t){return r[t]}))}else o.replace(n)})}function x(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||o(e).lastQuery,r=t?e.phrase("Replace all:"):e.phrase("Replace:"),a=g("",null,g("span",{className:"CodeMirror-search-label"},r),v(e));l(e,a,r,n,function(n){n&&(n=f(n),l(e,y(e),e.phrase("Replace with:"),"",function(o){if(o=c(o),t)C(e,n,o);else{p(e);var r=i(e,n,e.getCursor("from")),a=function(){var t,c=r.from();!(t=r.findNext())&&(r=i(e,n),!(t=r.findNext())||c&&r.from().line==c.line&&r.from().ch==c.ch)||(e.setSelection(r.from(),r.to()),e.scrollIntoView({from:r.from(),to:r.to()}),s(e,b(e),e.phrase("Replace?"),[function(){l(t)},a,function(){C(e,n,o)}]))},l=function(e){r.replace("string"==typeof n?o:o.replace(/\$(\d)/g,function(t,n){return e[n]})),a()};a()}}))})}}e.defineOption("search",{bottom:!1}),e.commands.find=function(e){p(e),d(e)},e.commands.findPersistent=function(e){p(e),d(e,!1,!0)},e.commands.findPersistentNext=function(e){d(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){d(e,!0,!0,!0)},e.commands.findNext=d,e.commands.findPrev=function(e){d(e,!0)},e.commands.clearSearch=p,e.commands.replace=x,e.commands.replaceAll=function(e){x(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function n(e){clearTimeout(o.doRedraw),o.doRedraw=setTimeout(function(){o.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var o=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(o.doUpdate),o.doUpdate=setTimeout(function(){o.computeScale()&&n(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),!1!==t.listenForChanges&&e.on("changes",this.changeHandler=function(){n(250)})}e.defineExtension("annotateScrollbar",function(e){return"string"==typeof e&&(e={className:e}),new t(this,e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,t=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.getScrollerElement().scrollHeight;if(t!=this.hScale)return this.hScale=t,!0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){function t(e,t){if(s!=e.line){s=e.line,c=n.getLineHandle(e.line);var o=n.getLineHandleVisualStart(c);o!=c&&(s=n.getLineNumber(o),c=o)}return c.widgets&&c.widgets.length||a&&c.height>l?n.charCoords(e,"local")[t?"top":"bottom"]:n.heightAtLine(c,"local")+(t?0:c.height)}!1!==e&&this.computeScale();var n=this.cm,o=this.hScale,r=document.createDocumentFragment(),i=this.annotations,a=n.getOption("lineWrapping"),l=a&&1.5*n.defaultTextHeight(),s=null,c=null,f=n.lastLine();if(n.display.barWidth)for(var u,d=0;d<i.length;d++){var h=i[d];if(!(h.to.line>f)){for(var p=u||t(h.from,!0)*o,g=t(h.to,!1)*o;d<i.length-1&&!(i[d+1].to.line>f)&&!((u=t(i[d+1].from,!0)*o)>g+.9);)h=i[++d],g=t(h.to,!1)*o;if(g!=p){var m=Math.max(g-p,3),v=r.appendChild(document.createElement("div"));v.style.cssText="position: absolute; right: 0px; width: "+Math.max(n.display.barWidth-1,2)+"px; top: "+(p+this.buttonHeight)+"px; height: "+m+"px",v.className=this.options.className,h.id&&v.setAttribute("annotation-id",h.id)}}}this.div.textContent="",this.div.appendChild(r)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("changes",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t,n,o){this.cm=e,this.options=o;var r={listenForChanges:!1};for(var i in o)r[i]=o[i];r.className||(r.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(r),this.query=t,this.caseFold=n,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var a=this;e.on("change",this.changeHandler=function(e,t){a.onChange(t)})}function n(e,t,n){return e<=t?e:Math.max(t,e+n)}e.defineExtension("showMatchesOnScrollbar",function(e,n,o){return"string"==typeof o&&(o={className:o}),o||(o={}),new t(this,e,n,o)});var o=1e3;t.prototype.findMatches=function(){if(this.gap){for(var t=0;t<this.matches.length;t++){var n=this.matches[t];if(n.from.line>=this.gap.to)break;n.to.line>=this.gap.from&&this.matches.splice(t--,1)}for(var r=this.cm.getSearchCursor(this.query,e.Pos(this.gap.from,0),{caseFold:this.caseFold,multiline:this.options.multiline}),i=this.options&&this.options.maxMatches||o;r.findNext();){var n={from:r.from(),to:r.to()};if(n.from.line>=this.gap.to)break;if(this.matches.splice(t++,0,n),this.matches.length>i)break}this.gap=null}},t.prototype.onChange=function(t){var o=t.from.line,r=e.changeEnd(t).line,i=r-t.to.line;if(this.gap?(this.gap.from=Math.min(n(this.gap.from,o,i),t.from.line),this.gap.to=Math.max(n(this.gap.to,o,i),t.from.line)):this.gap={from:t.from.line,to:r+1},i)for(var a=0;a<this.matches.length;a++){var l=this.matches[a],s=n(l.from.line,o,i);s!=l.from.line&&(l.from=e.Pos(s,l.from.ch));var c=n(l.to.line,o,i);c!=l.to.line&&(l.to=e.Pos(c,l.to.ch))}clearTimeout(this.update);var f=this;this.update=setTimeout(function(){f.updateAfterChange()},250)},t.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},t.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.style.direction=e.getOption("direction"),n.className="CodeMirror-placeholder CodeMirror-line-like";var o=e.getOption("placeholder");"string"==typeof o&&(o=document.createTextNode(o)),n.appendChild(o),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function o(e){setTimeout(function(){var o=!1;if(1==e.lineCount()){var r=e.getInputField();o="TEXTAREA"==r.nodeName?!e.getLine(0).length:!/[^\u200b]/.test(r.querySelector(".CodeMirror-line").textContent)}o?n(e):t(e)},20)}function r(e){a(e)&&n(e)}function i(e){var o=e.getWrapperElement(),r=a(e);o.className=o.className.replace(" CodeMirror-empty","")+(r?" CodeMirror-empty":""),r?n(e):t(e)}function a(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(n,a,l){var s=l&&l!=e.Init;if(a&&!s)n.on("blur",r),n.on("change",i),n.on("swapDoc",i),e.on(n.getInputField(),"compositionupdate",n.state.placeholderCompose=function(){o(n)}),i(n);else if(!a&&s){n.off("blur",r),n.off("change",i),n.off("swapDoc",i),e.off(n.getInputField(),"compositionupdate",n.state.placeholderCompose),t(n);var c=n.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}a&&!n.hasFocus()&&r(n)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(e){function t(t){if(t.getOption("disableInput"))return e.Pass;for(var n=t.listSelections(),o=[],s=t.getOption("autoCloseTags"),c=0;c<n.length;c++){if(!n[c].empty())return e.Pass;var f=n[c].head,u=t.getTokenAt(f),d=e.innerMode(t.getMode(),u.state),h=d.state,p=d.mode.xmlCurrentTag&&d.mode.xmlCurrentTag(h),g=p&&p.name;if(!g)return e.Pass;var m="html"==d.mode.configuration,v="object"==typeof s&&s.dontCloseTags||m&&a,y="object"==typeof s&&s.indentTags||m&&l;u.end>f.ch&&(g=g.slice(0,g.length-u.end+f.ch));var b=g.toLowerCase();if(!g||"string"==u.type&&(u.end!=f.ch||!/[\"\']/.test(u.string.charAt(u.string.length-1))||1==u.string.length)||"tag"==u.type&&p.close||u.string.indexOf("/")==f.ch-u.start-1||v&&r(v,b)>-1||i(t,d.mode.xmlCurrentContext&&d.mode.xmlCurrentContext(h)||[],g,f,!0))return e.Pass;var C="object"==typeof s&&s.emptyTags;if(C&&r(C,g)>-1)o[c]={text:"/>",newPos:e.Pos(f.line,f.ch+2)};else{var x=y&&r(y,b)>-1;o[c]={indent:x,text:">"+(x?"\n\n":"")+"</"+g+">",newPos:x?e.Pos(f.line+1,0):e.Pos(f.line,f.ch+1)}}}for(var O="object"==typeof s&&s.dontIndentOnAutoClose,c=n.length-1;c>=0;c--){var w=o[c];t.replaceRange(w.text,n[c].head,n[c].anchor,"+insert");var L=t.listSelections().slice(0);L[c]={head:w.newPos,anchor:w.newPos},t.setSelections(L),!O&&w.indent&&(t.indentLine(w.newPos.line,null,!0),t.indentLine(w.newPos.line+1,null,!0))}}function n(t,n){for(var o=t.listSelections(),r=[],a=n?"/":"</",l=t.getOption("autoCloseTags"),s="object"==typeof l&&l.dontIndentOnSlash,c=0;c<o.length;c++){if(!o[c].empty())return e.Pass;var f=o[c].head,u=t.getTokenAt(f),d=e.innerMode(t.getMode(),u.state),h=d.state;if(n&&("string"==u.type||"<"!=u.string.charAt(0)||u.start!=f.ch-1))return e.Pass;var p,g="xml"!=d.mode.name&&"htmlmixed"==t.getMode().name;if(g&&"javascript"==d.mode.name)p=a+"script";else if(g&&"css"==d.mode.name)p=a+"style";else{var m=d.mode.xmlCurrentContext&&d.mode.xmlCurrentContext(h),v=m.length?m[m.length-1]:"";if(!m||m.length&&i(t,m,v,f))return e.Pass;p=a+v}">"!=t.getLine(f.line).charAt(u.end)&&(p+=">"),r[c]=p}if(t.replaceSelections(r),o=t.listSelections(),!s)for(var c=0;c<o.length;c++)(c==o.length-1||o[c].head.line<o[c+1].head.line)&&t.indentLine(o[c].head.line)}function o(t){return t.getOption("disableInput")?e.Pass:n(t,!0)}function r(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;++n)if(e[n]==t)return n;return-1}function i(t,n,o,r,i){if(!e.scanForClosingTag)return!1;var a=Math.min(t.lastLine()+1,r.line+500),l=e.scanForClosingTag(t,r,null,a);if(!l||l.tag!=o)return!1;for(var s=i?1:0,c=n.length-1;c>=0&&n[c]==o;c--)++s;r=l.to;for(var c=1;c<s;c++){var f=e.scanForClosingTag(t,r,null,a);if(!f||f.tag!=o)return!1;r=f.to}return!0}e.defineOption("autoCloseTags",!1,function(n,r,i){if(i!=e.Init&&i&&n.removeKeyMap("autoCloseTags"),r){var a={name:"autoCloseTags"};"object"==typeof r&&!1===r.whenClosing||(a["'/'"]=function(e){return o(e)}),"object"==typeof r&&!1===r.whenOpening||(a["'>'"]=function(e){return t(e)}),n.addKeyMap(a)}});var a=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],l=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];e.commands.closeTag=function(e){return n(e)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,r,i,a){function l(e){var n=s(t,r);if(!n||n.to.line-n.from.line<c)return null;if("fold"===a)return n;for(var o=t.findMarksAt(n.from),i=0;i<o.length;++i)if(o[i].__isFold){if(!e)return null;n.cleared=!0,o[i].clear()}return n}if(i&&i.call){var s=i;i=null}else var s=o(t,i,"rangeFinder");"number"==typeof r&&(r=e.Pos(r,0));var c=o(t,i,"minFoldSize"),f=l(!0);if(o(t,i,"scanUp"))for(;!f&&r.line>t.firstLine();)r=e.Pos(r.line-1,0),f=l(!1);if(f&&!f.cleared&&"unfold"!==a){var u=n(t,i,f);e.on(u,"mousedown",function(t){d.clear(),e.e_preventDefault(t)});var d=t.markText(f.from,f.to,{replacedWith:u,clearOnEnter:o(t,i,"clearOnEnter"),__isFold:!0});d.on("clear",function(n,o){e.signal(t,"unfold",t,n,o)}),e.signal(t,"fold",t,f.from,f.to)}}function n(e,t,n){var r=o(e,t,"widget");if("function"==typeof r&&(r=r(n.from,n.to)),"string"==typeof r){var i=document.createTextNode(r);r=document.createElement("span"),r.appendChild(i),r.className="CodeMirror-foldmarker"}else r&&(r=r.cloneNode(!0));return r}function o(e,t,n){if(t&&void 0!==t[n])return t[n];var o=e.options.foldOptions;return o&&void 0!==o[n]?o[n]:r[n]}e.newFoldFunction=function(e,n){return function(o,r){t(o,r,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,o){t(this,e,n,o)}),e.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),{scanUp:!1},"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),o=t.lastLine();n<=o;n++)t.foldCode(e.Pos(n,0),{scanUp:!1},"fold")})},e.commands.unfoldAll=function(t){t.operation(function(){for(var n=t.firstLine(),o=t.lastLine();n<=o;n++)t.foldCode(e.Pos(n,0),{scanUp:!1},"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var o=0;o<e.length;++o){var r=e[o](t,n);if(r)return r}}}),e.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),o=0;o<n.length;o++){var r=n[o](e,t);if(r)return r}});var r={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};e.defineOption("foldOptions",null),e.defineExtension("foldOption",function(e,t){return o(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options=e,this.from=this.to=0}function n(e){return!0===e&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function o(e,t){for(var n=e.findMarks(d(t,0),d(t+1,0)),o=0;o<n.length;++o)if(n[o].__isFold){var r=n[o].find(-1);if(r&&r.line===t)return n[o]}}function r(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function i(e,t,n){var i=e.state.foldGutter.options,l=t-1,s=e.foldOption(i,"minFoldSize"),c=e.foldOption(i,"rangeFinder"),f="string"==typeof i.indicatorFolded&&a(i.indicatorFolded),u="string"==typeof i.indicatorOpen&&a(i.indicatorOpen);e.eachLine(t,n,function(t){++l;var n=null,a=t.gutterMarkers;if(a&&(a=a[i.gutter]),o(e,l)){if(f&&a&&f.test(a.className))return;n=r(i.indicatorFolded)}else{var h=d(l,0),p=c&&c(e,h);if(p&&p.to.line-p.from.line>=s){if(u&&a&&u.test(a.className))return;n=r(i.indicatorOpen)}}(n||a)&&e.setGutterMarker(t,i.gutter,n)})}function a(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function l(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){i(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function s(e,t,n){var r=e.state.foldGutter;if(r){var i=r.options;if(n==i.gutter){var a=o(e,t);a?a.clear():e.foldCode(d(t,0),i)}}}function c(e){var t=e.state.foldGutter;if(t){var n=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){l(e)},n.foldOnChangeTimeSpan||600)}}function f(e){var t=e.state.foldGutter;if(t){var n=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var n=e.getViewport();t.from==t.to||n.from-t.to>20||t.from-n.to>20?l(e):e.operation(function(){n.from<t.from&&(i(e,n.from,t.from),t.from=n.from),n.to>t.to&&(i(e,t.to,n.to),t.to=n.to)})},n.updateViewportTimeSpan||400)}}function u(e,t){var n=e.state.foldGutter;if(n){var o=t.line;o>=n.from&&o<n.to&&i(e,o,o+1)}}e.defineOption("foldGutter",!1,function(o,r,i){i&&i!=e.Init&&(o.clearGutter(o.state.foldGutter.options.gutter),o.state.foldGutter=null,o.off("gutterClick",s),o.off("changes",c),o.off("viewportChange",f),o.off("fold",u),o.off("unfold",u),o.off("swapDoc",c)),r&&(o.state.foldGutter=new t(n(r)),l(o),o.on("gutterClick",s),o.on("changes",c),o.on("viewportChange",f),o.on("fold",u),o.on("unfold",u),o.on("swapDoc",c))});var d=e.Pos}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t,n){var o=t.getLine(n),r=o.search(/\S/);return-1==r||/\bcomment\b/.test(t.getTokenTypeAt(e.Pos(n,r+1)))?-1:e.countColumn(o,null,t.getOption("tabSize"))}e.registerHelper("fold","indent",function(n,o){var r=t(n,o.line);if(!(r<0)){for(var i=null,a=o.line+1,l=n.lastLine();a<=l;++a){var s=t(n,a);if(-1==s);else{if(!(s>r))break;i=a}}return i?{from:e.Pos(o.line,n.getLine(o.line).length),to:e.Pos(i,n.getLine(i).length)}:void 0}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(t){return function(n,o){function r(t){for(var r,i=o.ch,s=0;;){var c=i<=0?-1:l.lastIndexOf(t[0],i-1);if(-1!=c){if(1==s&&c<o.ch)break;if(r=n.getTokenTypeAt(e.Pos(a,c+1)),!/^(comment|string)/.test(r))return{ch:c+1,tokenType:r,pair:t};i=c-1}else{if(1==s)break;s=1,i=l.length}}}function i(t){var o,r,i=1,l=n.lastLine(),s=t.ch;e:for(var c=a;c<=l;++c)for(var f=n.getLine(c),u=c==a?s:0;;){var d=f.indexOf(t.pair[0],u),h=f.indexOf(t.pair[1],u);if(d<0&&(d=f.length),h<0&&(h=f.length),(u=Math.min(d,h))==f.length)break;if(n.getTokenTypeAt(e.Pos(c,u+1))==t.tokenType)if(u==d)++i;else if(!--i){o=c,r=u;break e}++u}return null==o||a==o?null:{from:e.Pos(a,s),to:e.Pos(o,r)}}for(var a=o.line,l=n.getLine(a),s=[],c=0;c<t.length;c++){var f=r(t[c]);f&&s.push(f)}s.sort(function(e,t){return e.ch-t.ch});for(var c=0;c<s.length;c++){var u=i(s[c]);if(u)return u}return null}}e.registerHelper("fold","brace",t([["{","}"],["[","]"]])),e.registerHelper("fold","brace-paren",t([["{","}"],["[","]"],["(",")"]])),e.registerHelper("fold","import",function(t,n){function o(n){if(n<t.firstLine()||n>t.lastLine())return null;var o=t.getTokenAt(e.Pos(n,1));if(/\S/.test(o.string)||(o=t.getTokenAt(e.Pos(n,o.end+1))),"keyword"!=o.type||"import"!=o.string)return null;for(var r=n,i=Math.min(t.lastLine(),n+10);r<=i;++r){var a=t.getLine(r),l=a.indexOf(";");if(-1!=l)return{startCh:o.end,end:e.Pos(r,l)}}}var r,i=n.line,a=o(i);if(!a||o(i-1)||(r=o(i-2))&&r.end.line==i-1)return null;for(var l=a.end;;){var s=o(l.line+1);if(null==s)break;l=s.end}return{from:t.clipPos(e.Pos(i,a.startCh+1)),to:l}}),e.registerHelper("fold","include",function(t,n){function o(n){if(n<t.firstLine()||n>t.lastLine())return null;var o=t.getTokenAt(e.Pos(n,1));return/\S/.test(o.string)||(o=t.getTokenAt(e.Pos(n,o.end+1))),"meta"==o.type&&"#include"==o.string.slice(0,8)?o.start+8:void 0}var r=n.line,i=o(r);if(null==i||null!=o(r-1))return null;for(var a=r;;){if(null==o(a+1))break;++a}return{from:e.Pos(r,i+1),to:t.clipPos(e.Pos(a))}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){return e.line-t.line||e.ch-t.ch}function n(e,t,n,o){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=o?Math.max(o.from,e.firstLine()):e.firstLine(),this.max=o?Math.min(o.to-1,e.lastLine()):e.lastLine()}function o(e,t){var n=e.cm.getTokenTypeAt(d(e.line,t));return n&&/\btag\b/.test(n)}function r(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function i(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function a(e){for(;;){var t=e.text.indexOf(">",e.ch);if(-1==t){if(r(e))continue;return}{if(o(e,t+1)){var n=e.text.lastIndexOf("/",t),i=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,i?"selfClose":"regular"}e.ch=t+1}}}function l(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(i(e))continue;return}if(o(e,t+1)){g.lastIndex=t,e.ch=t;var n=g.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function s(e){for(;;){g.lastIndex=e.ch;var t=g.exec(e.text);if(!t){if(r(e))continue;return}{if(o(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}}function c(e){for(;;){var t=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==t){if(i(e))continue;return}{if(o(e,t+1)){var n=e.text.lastIndexOf("/",t),r=n>-1&&!/\S/.test(e.text.slice(n+1,t));return e.ch=t+1,r?"selfClose":"regular"}e.ch=t}}}function f(e,t){for(var n=[];;){var o,r=s(e),i=e.line,l=e.ch-(r?r[0].length:0);if(!r||!(o=a(e)))return;if("selfClose"!=o)if(r[1]){for(var c=n.length-1;c>=0;--c)if(n[c]==r[2]){n.length=c;break}if(c<0&&(!t||t==r[2]))return{tag:r[2],from:d(i,l),to:d(e.line,e.ch)}}else n.push(r[2])}}function u(e,t){for(var n=[];;){var o=c(e);if(!o)return;if("selfClose"!=o){var r=e.line,i=e.ch,a=l(e);if(!a)return;if(a[1])n.push(a[2]);else{for(var s=n.length-1;s>=0;--s)if(n[s]==a[2]){n.length=s;break}if(s<0&&(!t||t==a[2]))return{tag:a[2],from:d(e.line,e.ch),to:d(r,i)}}}else l(e)}}var d=e.Pos,h="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",p=h+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",g=new RegExp("<(/?)(["+h+"]["+p+"]*)","g");e.registerHelper("fold","xml",function(e,o){for(var r=new n(e,o.line,0);;){var i=s(r);if(!i||r.line!=o.line)return;var l=a(r);if(!l)return;if(!i[1]&&"selfClose"!=l){var c=d(r.line,r.ch),u=f(r,i[2]);return u&&t(u.from,c)>0?{from:c,to:u.from}:null}}}),e.findMatchingTag=function(e,o,r){var i=new n(e,o.line,o.ch,r);if(-1!=i.text.indexOf(">")||-1!=i.text.indexOf("<")){var s=a(i),c=s&&d(i.line,i.ch),h=s&&l(i);if(s&&h&&!(t(i,o)>0)){var p={from:d(i.line,i.ch),to:c,tag:h[2]};return"selfClose"==s?{open:p,close:null,at:"open"}:h[1]?{open:u(i,h[2]),close:p,at:"close"}:(i=new n(e,c.line,c.ch,r),{open:p,close:f(i,h[2]),at:"open"})}}},e.findEnclosingTag=function(e,t,o,r){for(var i=new n(e,t.line,t.ch,o);;){var a=u(i,r);if(!a)break;var l=new n(e,t.line,t.ch,o),s=f(l,a.tag);if(s)return{open:a,close:s}}},e.scanForClosingTag=function(e,t,o,r){return f(new n(e,t.line,t.ch,r?{from:0,to:r}:null),o)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerHelper("fold","markdown",function(t,n){function o(n){var o=t.getTokenTypeAt(e.Pos(n,0));return o&&/\bheader\b/.test(o)}function r(e,t,n){var r=t&&t.match(/^#+/);return r&&o(e)?r[0].length:(r=n&&n.match(/^[=\-]+\s*$/),r&&o(e+1)?"="==n[0]?1:2:i)}var i=100,a=t.getLine(n.line),l=t.getLine(n.line+1),s=r(n.line,a,l);if(s!==i){for(var c=t.lastLine(),f=n.line,u=t.getLine(f+2);f<c&&!(r(f+1,l,u)<=s);)++f,l=u,u=t.getLine(f+2);return{from:e.Pos(n.line,a.length),to:e.Pos(f,t.getLine(f).length)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(t,n){var o=t.getModeAt(n),r=o.blockCommentStart,i=o.blockCommentEnd;if(r&&i){for(var a,l=n.line,s=t.getLine(l),c=n.ch,f=0;;){var u=c<=0?-1:s.lastIndexOf(r,c-1);if(-1!=u){if(1==f&&u<n.ch)return;if(/comment/.test(t.getTokenTypeAt(e.Pos(l,u+1)))&&(0==u||s.slice(u-i.length,u)==i||!/comment/.test(t.getTokenTypeAt(e.Pos(l,u))))){a=u+r.length;break}c=u-1}else{if(1==f)return;f=1,c=s.length}}var d,h,p=1,g=t.lastLine();e:for(var m=l;m<=g;++m)for(var v=t.getLine(m),y=m==l?a:0;;){var b=v.indexOf(r,y),C=v.indexOf(i,y);if(b<0&&(b=v.length),C<0&&(C=v.length),(y=Math.min(b,C))==v.length)break;if(y==b)++p;else if(!--p){d=m,h=y;break e}++y}if(null!=d&&(l!=d||h!=a))return{from:e.Pos(l,a),to:e.Pos(d,h)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,n,o){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(o){return{base:e.copyState(t,o.base),overlay:e.copyState(n,o.overlay),basePos:o.basePos,baseCur:null,overlayPos:o.overlayPos,overlayCur:null}},token:function(e,r){return(e!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<e.start)&&(r.streamSeen=e,r.basePos=r.overlayPos=e.start),e.start==r.basePos&&(r.baseCur=t.token(e,r.base),r.basePos=e.pos),e.start==r.overlayPos&&(e.pos=e.start,r.overlayCur=n.token(e,r.overlay),r.overlayPos=e.pos),e.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||o&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:t.indent&&function(e,n,o){return t.indent(e.base,n,o)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var r,i;return t.blankLine&&(r=t.blankLine(e.base)),n.blankLine&&(i=n.blankLine(e.overlay)),null==i?r:o&&null!=r?r+" "+i:i}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",i),e.removeLineClass(e.state.activeLines[t],"background",a),e.removeLineClass(e.state.activeLines[t],"gutter",l)}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function o(e,o){for(var r=[],s=0;s<o.length;s++){var c=o[s],f=e.getOption("styleActiveLine");if("object"==typeof f&&f.nonEmpty?c.anchor.line==c.head.line:c.empty()){var u=e.getLineHandleVisualStart(c.head.line);r[r.length-1]!=u&&r.push(u)}}n(e.state.activeLines,r)||e.operation(function(){t(e);for(var n=0;n<r.length;n++)e.addLineClass(r[n],"wrap",i),e.addLineClass(r[n],"background",a),e.addLineClass(r[n],"gutter",l);e.state.activeLines=r})}function r(e,t){o(e,t.ranges)}var i="CodeMirror-activeline",a="CodeMirror-activeline-background",l="CodeMirror-activeline-gutter";e.defineOption("styleActiveLine",!1,function(n,i,a){var l=a!=e.Init&&a;i!=l&&(l&&(n.off("beforeSelectionChange",r),t(n),delete n.state.activeLines),i&&(n.state.activeLines=[],o(n,n.listSelections()),n.on("beforeSelectionChange",r)))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:d[t]}function n(e){for(var t=0;t<e.length;t++){var n=e.charAt(t),r="'"+n+"'";p[r]||(p[r]=o(n))}}function o(e){return function(t){return c(t,e)}}function r(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function i(n){var o=r(n);if(!o||n.getOption("disableInput"))return e.Pass;for(var i=t(o,"pairs"),a=n.listSelections(),l=0;l<a.length;l++){if(!a[l].empty())return e.Pass;var s=f(n,a[l].head);if(!s||i.indexOf(s)%2!=0)return e.Pass}for(var l=a.length-1;l>=0;l--){var c=a[l].head;n.replaceRange("",h(c.line,c.ch-1),h(c.line,c.ch+1),"+delete")}}function a(n){var o=r(n),i=o&&t(o,"explode");if(!i||n.getOption("disableInput"))return e.Pass;for(var a=n.listSelections(),s=0;s<a.length;s++){if(!a[s].empty())return e.Pass;var c=f(n,a[s].head);if(!c||i.indexOf(c)%2!=0)return e.Pass}n.operation(function(){var e=n.lineSeparator()||"\n";n.replaceSelection(e+e,null),l(n,-1),a=n.listSelections();for(var t=0;t<a.length;t++){var o=a[t].head.line;n.indentLine(o,null,!0),n.indentLine(o+1,null,!0)}})}function l(e,t){for(var n=[],o=e.listSelections(),r=0,i=0;i<o.length;i++){var a=o[i];a.head==e.getCursor()&&(r=i);var l=a.head.ch||t>0?{line:a.head.line,ch:a.head.ch+t}:{line:a.head.line-1};n.push({anchor:l,head:l})}e.setSelections(n,r)}function s(t){var n=e.cmpPos(t.anchor,t.head)>0;return{anchor:new h(t.anchor.line,t.anchor.ch+(n?-1:1)),head:new h(t.head.line,t.head.ch+(n?1:-1))}}function c(n,o){var i=r(n);if(!i||n.getOption("disableInput"))return e.Pass;var a=t(i,"pairs"),c=a.indexOf(o);if(-1==c)return e.Pass;for(var f,d=t(i,"closeBefore"),p=t(i,"triples"),g=a.charAt(c+1)==o,m=n.listSelections(),v=c%2==0,y=0;y<m.length;y++){var b,C=m[y],x=C.head,O=n.getRange(x,h(x.line,x.ch+1));if(v&&!C.empty())b="surround";else if(!g&&v||O!=o)if(g&&x.ch>1&&p.indexOf(o)>=0&&n.getRange(h(x.line,x.ch-2),x)==o+o){if(x.ch>2&&/\bstring/.test(n.getTokenTypeAt(h(x.line,x.ch-2))))return e.Pass;b="addFour"}else if(g){var w=0==x.ch?" ":n.getRange(h(x.line,x.ch-1),x);if(e.isWordChar(O)||w==o||e.isWordChar(w))return e.Pass;b="both"}else{if(!v||!(0===O.length||/\s/.test(O)||d.indexOf(O)>-1))return e.Pass;b="both"}else b=g&&u(n,x)?"both":p.indexOf(o)>=0&&n.getRange(x,h(x.line,x.ch+3))==o+o+o?"skipThree":"skip";if(f){if(f!=b)return e.Pass}else f=b}var L=c%2?a.charAt(c-1):o,k=c%2?o:a.charAt(c+1);n.operation(function(){if("skip"==f)l(n,1);else if("skipThree"==f)l(n,3);else if("surround"==f){for(var e=n.getSelections(),t=0;t<e.length;t++)e[t]=L+e[t]+k;n.replaceSelections(e,"around"),e=n.listSelections().slice();for(var t=0;t<e.length;t++)e[t]=s(e[t]);n.setSelections(e)}else"both"==f?(n.replaceSelection(L+k,null),n.triggerElectric(L+k),l(n,-1)):"addFour"==f&&(n.replaceSelection(L+L+L+L,"before"),l(n,1))})}function f(e,t){var n=e.getRange(h(t.line,t.ch-1),h(t.line,t.ch+1));return 2==n.length?n:null}function u(e,t){var n=e.getTokenAt(h(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}var d={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},h=e.Pos;e.defineOption("autoCloseBrackets",!1,function(o,r,i){i&&i!=e.Init&&(o.removeKeyMap(p),o.state.closeBrackets=null),r&&(n(t(r,"pairs")),o.state.closeBrackets=r,o.addKeyMap(p))});var p={Backspace:i,Enter:a};n(d.pairs+"`")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}function n(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var n=e.state.fullScreenRestore;t.style.width=n.width,t.style.height=n.height,window.scrollTo(n.scrollLeft,n.scrollTop),e.refresh()}e.defineOption("fullScreen",!1,function(o,r,i){i==e.Init&&(i=!1),!i!=!r&&(r?t(o):n(o))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],e):e(CodeMirror)}(function(e){"use strict";function t(e){this.options={};for(var t in u)this.options[t]=(e&&e.hasOwnProperty(t)?e:u)[t];this.overlay=this.timeout=null,this.matchesonscroll=null,this.active=!1}function n(e){var t=e.state.matchHighlighter;(t.active||e.hasFocus())&&r(e,t)}function o(e){var t=e.state.matchHighlighter;t.active||(t.active=!0,r(e,t))}function r(e,t){clearTimeout(t.timeout),t.timeout=setTimeout(function(){l(e)},t.options.delay)}function i(e,t,n,o){var r=e.state.matchHighlighter;if(e.addOverlay(r.overlay=f(t,n,o)),r.options.annotateScrollbar&&e.showMatchesOnScrollbar){var i=n?new RegExp((/\w/.test(t.charAt(0))?"\\b":"")+t.replace(/[\\\[.+*?(){|^$]/g,"\\$&")+(/\w/.test(t.charAt(t.length-1))?"\\b":"")):t;r.matchesonscroll=e.showMatchesOnScrollbar(i,!1,{className:"CodeMirror-selection-highlight-scrollbar"})}}function a(e){var t=e.state.matchHighlighter;t.overlay&&(e.removeOverlay(t.overlay),t.overlay=null,t.matchesonscroll&&(t.matchesonscroll.clear(),t.matchesonscroll=null))}function l(e){e.operation(function(){var t=e.state.matchHighlighter;if(a(e),!e.somethingSelected()&&t.options.showToken){for(var n=!0===t.options.showToken?/[\w$]/:t.options.showToken,o=e.getCursor(),r=e.getLine(o.line),l=o.ch,c=l;l&&n.test(r.charAt(l-1));)--l;for(;c<r.length&&n.test(r.charAt(c));)++c;return void(l<c&&i(e,r.slice(l,c),n,t.options.style))}var f=e.getCursor("from"),u=e.getCursor("to");if(f.line==u.line&&(!t.options.wordsOnly||s(e,f,u))){var d=e.getRange(f,u);t.options.trim&&(d=d.replace(/^\s+|\s+$/g,"")),d.length>=t.options.minChars&&i(e,d,!1,t.options.style)}})}function s(e,t,n){if(null!==e.getRange(t,n).match(/^\w+$/)){if(t.ch>0){var o={line:t.line,ch:t.ch-1},r=e.getRange(o,t);if(null===r.match(/\W/))return!1}if(n.ch<e.getLine(t.line).length){var o={line:n.line,ch:n.ch+1},r=e.getRange(n,o);if(null===r.match(/\W/))return!1}return!0}return!1}function c(e,t){return!(e.start&&t.test(e.string.charAt(e.start-1))||e.pos!=e.string.length&&t.test(e.string.charAt(e.pos)))}function f(e,t,n){return{token:function(o){if(o.match(e)&&(!t||c(o,t)))return n;o.next(),o.skipTo(e.charAt(0))||o.skipToEnd()}}}var u={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};e.defineOption("highlightSelectionMatches",!1,function(r,i,s){if(s&&s!=e.Init&&(a(r),clearTimeout(r.state.matchHighlighter.timeout),r.state.matchHighlighter=null,r.off("cursorActivity",n),r.off("focus",o)),i){var c=r.state.matchHighlighter=new t(i);r.hasFocus()?(c.active=!0,l(r)):r.on("focus",o),r.on("cursorActivity",n)}})});